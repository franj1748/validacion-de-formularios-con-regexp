<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding favicon -->
    

    <!-- Adding meta -->
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      validacion.js
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-dark.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">Validación de formularios con RegExp</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><ul><li class="menu-li"><a href='https://github.com/franj1748/validacion-de-formularios-con-regexp.git' class=' menu-link' id='' target='_blank'>Proyecto en GitHub</a></li><li class="menu-li"><a href='https://github.com/franj1748/configuracion-jsdoc.git' class=' menu-link' id='' target='_blank'>Archivos de configuración para JSDoc</a></li></ul><div class="accordion collapsed" id="6537230" > <h3 class="accordion-heading">Global<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#campos">campos</a></li><li class="accordion-list" id=""><a href="global.html#enviarFormulario">enviarFormulario</a></li><li class="accordion-list" id=""><a href="global.html#expresiones">expresiones</a></li><li class="accordion-list" id=""><a href="global.html#formulario">formulario</a></li><li class="accordion-list" id=""><a href="global.html#inputs">inputs</a></li><li class="accordion-list" id=""><a href="global.html#validarCampo">validarCampo</a></li><li class="accordion-list" id=""><a href="global.html#validarFormulario">validarFormulario</a></li><li class="accordion-list" id=""><a href="global.html#validarPassword2">validarPassword2</a></li></ul> </div>
      
        <div class="navbar-resize" id="navbar-resize">
          <div class="resize-dots-container">
            <div class="dots"></div>
            <div class="dots"></div>
            <div class="dots"></div>
          </div> 
        </div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      
      <h1 id='page-title' class="page-title">
        validacion.js
      </h1>
      

      



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Variables
/**
 * Captura del formulario de la página.
 * @type {HTMLElement}
 */
const formulario = document.querySelector('#formulario');
/**
 * Captura de todos los inputs dentro del formulario del a página.
 * @type {NodeList}
 */
const inputs     = document.querySelectorAll('#formulario input');

/**
 * Contiene las expresiones regulares contra las que se comprobaran los valores de cada input. 
 * @type {Object}
 */
const expresiones = {
	usuario	: /^[a-zA-Z0-9\_\-]{4,16}$/, // Letras, números, guion y guion_bajo. De 4 a 16 caracteres. 
	nombre	: /^[a-zA-ZÀ-ÿ\s]{1,40}$/, // Letras y espacios, pueden llevar acentos. De 1 a 40 caracteres.
	password: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&amp;])([A-Za-z\d$@$!%*?&amp;]|[^ ]){8,15}$/, // Mínimo 8 caracteres, máximo 15 al menos una letra mayúscula y una minúscula, al menos un dígito, sin espacios en blanco, al menos 1 carácter especial.
	email	: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/, // El formato de email habitual. 
	phone	: /^\d{7,14}$/ // 7 a 14 números.
}

/**
 * Contiene una declaración booleana para cada campo de formulario, que cambiará a true si el campo pasa la validación correctamente.
 * @type {Object} 
 */
const campos = {
	usuario : false,
	nombre  : false,
	password: false,
	email	: false,
	phone	: false
}

// Listeners
// Se recorre el arreglo de inputs y se le agrega a cada uno un evento para cuando el usuario presione y suelte una tecla y para cuando pierdan el foco.
inputs.forEach(input => {
	input.addEventListener('keyup', validarFormulario);
	input.addEventListener('blur', validarFormulario);
});

// Evento de envío del formulario. 
formulario.addEventListener('submit', enviarFormulario);

// Funciones

/**
 *Verifica cuál campo de formulario desencadeno el evento para llamar a la función de validación enviándole los datos adecuados.  
 * @param {Event} e El elemento en donde se desencadena el evento. 
*/
function validarFormulario(e){

    const {usuario, nombre, password, email, phone} = expresiones;

	switch (e.target.name) {
		case "usuario":
			validarCampo(usuario, e.target, 'usuario');
		break;
		case "nombre":
			validarCampo(nombre, e.target, 'nombre');
		break;
		case "password":
			validarCampo(password, e.target, 'password');
			validarPassword2();
		break;
		case "password2":
			validarPassword2();
		break;
		case "email":
			validarCampo(email, e.target, 'email');
		break;
		case "phone":
			validarCampo(phone, e.target, 'phone');
		break;
	}
}

/**
 * Valida la expresión regular de cada campo contra su valor. 
 * @param {Object} expresion Expresión regular del campo editado contra la que se hará la validación.
 * @param {HTMLElement} input El elemento input donde se desencadeno el evento de cambio de valor o perdida de foco.
 * @param {String} campo El nombre del campo modificado. 
 */
function validarCampo(expresion, input, campo){

	if(expresion.test(input.value)){
		input.classList.remove('is-invalid');
		input.classList.add('is-valid');
		campos[campo] = true;
	} else {
		input.classList.add('is-invalid');
		input.classList.remove('is-valid');
		campos[campo] = false;
	}
}

/**
 * Verifica que el valor del campo de repetir contraseña, sea igual al valor de la contraseña principal. 
 */
function validarPassword2(){

	const inputPassword1 = document.querySelector('#password');
	const inputPassword2 = document.querySelector('#rePassword');

	if(inputPassword1.value !== inputPassword2.value){
		inputPassword2.classList.add('is-invalid');
		inputPassword2.classList.remove('is-valid');
		campos['password'] = false;
	} else {
		inputPassword2.classList.add('is-valid');
		inputPassword2.classList.remove('is-invalid');
		campos['password'] = true;
	}
}

/**
 * Previene el envío del formulario y verifica que todos los campos hayan pasado la validación.
 * @param {Event} e El submit del formulario. 
 */
function enviarFormulario(e){
    
    e.preventDefault();

	const checkTerms = document.querySelector('#checkTerms');
    const {usuario, nombre, password, email, phone} = campos;

	if(usuario &amp;&amp; nombre &amp;&amp; password &amp;&amp; email &amp;&amp; phone &amp;&amp; checkTerms.checked){
		
        const btnEnviar       = document.querySelector('#btnEnviar');
        const spinner         = document.createElement('span');
        spinner.className     = 'spinner-border spinner-border-lg';
        btnEnviar.textContent = '';
        btnEnviar.appendChild(spinner);

		// Luego de 2.5 segundos, se simula el envío del formulario. 
		setTimeout(() => {

            btnEnviar.removeChild(spinner);
            btnEnviar.textContent = 'Enviar';
            swal({
                title: "¡Formulario enviado!",
                icon: "success",
                button: "Ok",
            }).then( valor => {

                if (valor === null || valor === true){
                    formulario.reset();
                    location.reload();
                }
            });

			const alertModal = document.querySelector('.swal-modal');
			const btnModal = document.querySelector('.swal-button');
			alertModal.style.backgroundColor = '#EEEEEE';
			btnModal.classList.add('btn', 'btn-primary');

		}, 2500);

	} else {
        
        swal({
            title: "¡Error!",
            text: `0`,
            icon: "error",
            button: "OK",
        });
        
        const alertModal = document.querySelector('.swal-modal');
        const btnModal = document.querySelector('.swal-button');
        const alertText = document.querySelector('.swal-text'); 
        const contenido = `&lt;span class="text-center d-block">Algunos de los campos son incorrectos o están vacíos. Corrígelo e inténtalo de nuevo.&lt;/span>`
        alertText.innerHTML = contenido;
        alertModal.style.backgroundColor = '#EEEEEE';
        btnModal.classList.add('btn', 'btn-primary');
	}
}</code></pre>
        </article>
    </section>




    </div>

    <footer class="footer" id="footer">
      Creado por Francisco Elis
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"campos","link":"<a href=\"global.html#campos\">campos</a>"},{"title":"enviarFormulario","link":"<a href=\"global.html#enviarFormulario\">enviarFormulario</a>"},{"title":"expresiones","link":"<a href=\"global.html#expresiones\">expresiones</a>"},{"title":"formulario","link":"<a href=\"global.html#formulario\">formulario</a>"},{"title":"inputs","link":"<a href=\"global.html#inputs\">inputs</a>"},{"title":"validarCampo","link":"<a href=\"global.html#validarCampo\">validarCampo</a>"},{"title":"validarFormulario","link":"<a href=\"global.html#validarFormulario\">validarFormulario</a>"},{"title":"validarPassword2","link":"<a href=\"global.html#validarPassword2\">validarPassword2</a>"}];
        var options = 
          setupSearch(list, options)
      </script>
    

    

    
      <script src="scripts/resize.js"></script>
      <script type="text/javascript">
        var option = {"min":"300","max":"600"}
        setupResizeOptions(option)
      </script>
    

    


  </body>

</html>
